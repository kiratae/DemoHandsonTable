/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/hyperformula@0.1.3/commonjs/interpreter/FunctionRegistry.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";require("core-js/modules/es.symbol"),require("core-js/modules/es.symbol.description"),require("core-js/modules/es.symbol.iterator"),require("core-js/modules/es.array.concat"),require("core-js/modules/es.array.find"),require("core-js/modules/es.array.for-each"),require("core-js/modules/es.array.from"),require("core-js/modules/es.array.iterator"),require("core-js/modules/es.array.slice"),require("core-js/modules/es.function.name"),require("core-js/modules/es.map"),require("core-js/modules/es.object.keys"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.regexp.to-string"),require("core-js/modules/es.set"),require("core-js/modules/es.string.iterator"),require("core-js/modules/web.dom-collections.for-each"),require("core-js/modules/web.dom-collections.iterator"),exports.__esModule=!0,exports.FunctionRegistry=void 0,require("regenerator-runtime/runtime");var _errors=require("../errors"),_HyperFormula=require("../HyperFormula"),_VersionPlugin=require("./plugin/VersionPlugin");function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,r){return _arrayWithHoles(e)||_iterableToArrayLimit(e,r)||_unsupportedIterableToArray(e,r)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var t=[],n=!0,o=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(n=(a=u.next()).done)&&(t.push(a.value),!r||t.length!==r);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw i}}return t}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,r){var t;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(t=_unsupportedIterableToArray(e))||r&&e&&"number"==typeof e.length){t&&(e=t);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,u=!1;return{s:function(){t=e[Symbol.iterator]()},n:function(){var e=t.next();return a=e.done,e},e:function(e){u=!0,i=e},f:function(){try{a||null==t.return||t.return()}finally{if(u)throw i}}}}function _unsupportedIterableToArray(e,r){if(e){if("string"==typeof e)return _arrayLikeToArray(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(e,r):void 0}}function _arrayLikeToArray(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}function _classCallCheck(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,r,t){return r&&_defineProperties(e.prototype,r),t&&_defineProperties(e,t),e}var FunctionRegistry=function(){function e(r){var t=this;if(_classCallCheck(this,e),this.config=r,this.functions=new Map,this.volatileFunctions=new Set,this.structuralChangeFunctions=new Set,this.functionsWhichDoesNotNeedArgumentsToBeComputed=new Set,this.doesFunctionNeedArgumentToBeComputed=function(e){return t.functionsWhichDoesNotNeedArgumentsToBeComputed.has(e)},this.isFunctionVolatile=function(e){return t.volatileFunctions.has(e)},this.isFunctionDependentOnSheetStructureChange=function(e){return t.structuralChangeFunctions.has(e)},r.functionPlugins.length>0){this.instancePlugins=new Map;var n,o=_createForOfIteratorHelper(r.functionPlugins);try{for(o.s();!(n=o.n()).done;){var i=n.value;e.loadPluginFunctions(i,this.instancePlugins)}}catch(e){o.e(e)}finally{o.f()}}else this.instancePlugins=new Map(e.plugins);var a,u=_createForOfIteratorHelper(e.protectedFunctions());try{for(u.s();!(a=u.n()).done;){var s=_slicedToArray(a.value,2),c=s[0],l=s[1];e.loadFunctionUnprotected(l,c,this.instancePlugins)}}catch(e){u.e(e)}finally{u.f()}var f,d=_createForOfIteratorHelper(this.instancePlugins.entries());try{for(d.s();!(f=d.n()).done;){var y=_slicedToArray(f.value,2),h=y[0],g=y[1];this.categorizeFunction(h,g.implementedFunctions[h])}}catch(e){d.e(e)}finally{d.f()}}return _createClass(e,[{key:"initializePlugins",value:function(e){var r,t=this,n=[],o=_createForOfIteratorHelper(this.instancePlugins.entries());try{var i=function(){var o=_slicedToArray(r.value,2),i=o[0],a=o[1],u=n.find(function(e){return e instanceof a});void 0===u&&(u=new a(e),n.push(u));var s=a.implementedFunctions[i].method;t.functions.set(i,[s,u])};for(o.s();!(r=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}}},{key:"getFunctionPlugin",value:function(r){if(!e.functionIsProtected(r))return this.instancePlugins.get(r)}},{key:"getFunction",value:function(e){return this.functions.get(e)}},{key:"getPlugins",value:function(){var r,t=new Set,n=_createForOfIteratorHelper(this.instancePlugins);try{for(n.s();!(r=n.n()).done;){var o=_slicedToArray(r.value,2),i=o[0],a=o[1];e.functionIsProtected(i)||t.add(a)}}catch(e){n.e(e)}finally{n.f()}return Array.from(t)}},{key:"getRegisteredFunctionIds",value:function(){return Array.from(this.functions.keys())}},{key:"categorizeFunction",value:function(e,r){r.isVolatile&&this.volatileFunctions.add(e),r.doesNotNeedArgumentsToBeComputed&&this.functionsWhichDoesNotNeedArgumentsToBeComputed.add(e),r.isDependentOnSheetStructureChange&&this.structuralChangeFunctions.add(e)}}],[{key:"registerFunctionPlugin",value:function(e,r){this.loadPluginFunctions(e,this.plugins),void 0!==r&&this.loadTranslations(r)}},{key:"registerFunction",value:function(e,r,t){if(void 0===r.implementedFunctions[e])throw _errors.FunctionPluginValidationError.functionNotDeclaredInPlugin(e,r.name);this.loadPluginFunction(r,e,this.plugins),void 0!==t&&this.loadTranslations(t)}},{key:"unregisterFunction",value:function(e){if(this.functionIsProtected(e))throw _errors.ProtectedFunctionError.cannotUnregisterFunctionWithId(e);this.plugins.delete(e)}},{key:"unregisterFunctionPlugin",value:function(e){var r,t=_createForOfIteratorHelper(this.protectedPlugins());try{for(t.s();!(r=t.n()).done;){if(r.value===e)throw _errors.ProtectedFunctionError.cannotUnregisterProtectedPlugin()}}catch(e){t.e(e)}finally{t.f()}var n,o=_createForOfIteratorHelper(this.plugins.entries());try{for(o.s();!(n=o.n()).done;){var i=_slicedToArray(n.value,2),a=i[0];i[1]===e&&this.plugins.delete(a)}}catch(e){o.e(e)}finally{o.f()}}},{key:"unregisterAll",value:function(){this.plugins.clear()}},{key:"getRegisteredFunctionIds",value:function(){return[].concat(_toConsumableArray(Array.from(this.plugins.keys())),_toConsumableArray(Array.from(this._protectedPlugins.keys())))}},{key:"getPlugins",value:function(){return Array.from(new Set(this.plugins.values()).values())}},{key:"getFunctionPlugin",value:function(e){return this.functionIsProtected(e)?void 0:this.plugins.get(e)}},{key:"loadTranslations",value:function(e){var r=new Set(_HyperFormula.HyperFormula.getRegisteredLanguagesCodes());Object.keys(e).forEach(function(t){r.has(t)&&_HyperFormula.HyperFormula.getLanguage(t).extendFunctions(e[t])})}},{key:"loadPluginFunctions",value:function(e,r){var t=this;Object.keys(e.implementedFunctions).forEach(function(n){t.loadPluginFunction(e,n,r)})}},{key:"loadPluginFunction",value:function(e,r,t){if(this.functionIsProtected(r))throw _errors.ProtectedFunctionError.cannotRegisterFunctionWithId(r);this.loadFunctionUnprotected(e,r,t)}},{key:"loadFunctionUnprotected",value:function(e,r,t){var n=e.implementedFunctions[r].method;if(!Object.prototype.hasOwnProperty.call(e.prototype,n))throw _errors.FunctionPluginValidationError.functionMethodNotFound(n,e.name);t.set(r,e)}},{key:"functionIsProtected",value:function(e){return this._protectedPlugins.has(e)}},{key:"protectedFunctions",value:regeneratorRuntime.mark(function e(){var r,t,n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=_createForOfIteratorHelper(this._protectedPlugins),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}if(n=_slicedToArray(t.value,2),o=n[0],void 0===(i=n[1])){e.next=8;break}return e.next=8,[o,i];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,12,15,18]])})},{key:"protectedPlugins",value:regeneratorRuntime.mark(function e(){var r,t,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=_createForOfIteratorHelper(this._protectedPlugins),e.prev=1,r.s();case 3:if((t=r.n()).done){e.next=10;break}if(n=_slicedToArray(t.value,2),void 0===(o=n[1])){e.next=8;break}return e.next=8,o;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),r.e(e.t0);case 15:return e.prev=15,r.f(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,12,15,18]])})}]),e}();exports.FunctionRegistry=FunctionRegistry,FunctionRegistry.plugins=new Map,FunctionRegistry._protectedPlugins=new Map([["VERSION",_VersionPlugin.VersionPlugin],["OFFSET",void 0]]);
//# sourceMappingURL=/sm/7c0222c45cc3079047dee23d91c3c0f018bd94653203680b06e174ff984e4b97.map