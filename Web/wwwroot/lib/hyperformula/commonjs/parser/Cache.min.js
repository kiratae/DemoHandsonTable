/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/hyperformula@0.1.3/commonjs/parser/Cache.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
"use strict";require("core-js/modules/es.array.iterator"),require("core-js/modules/es.array.some"),require("core-js/modules/es.map"),require("core-js/modules/es.object.to-string"),require("core-js/modules/es.string.iterator"),require("core-js/modules/web.dom-collections.iterator"),exports.__esModule=!0,exports.doesContainFunctions=exports.Cache=void 0;var _=require("./");function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var s=0;s<t.length;s++){var o=t[s];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _createClass(e,t,s){return t&&_defineProperties(e.prototype,t),s&&_defineProperties(e,s),e}var buildCacheEntry=function(e,t,s,o){return{ast:e,relativeDependencies:t,hasVolatileFunction:s,hasStructuralChangeFunction:o}},Cache=function(){function e(t){_classCallCheck(this,e),this.functionRegistry=t,this.cache=new Map}return _createClass(e,[{key:"set",value:function(e,t){var s=(0,_.collectDependencies)(t,this.functionRegistry),o=buildCacheEntry(t,s,doesContainFunctions(t,this.functionRegistry.isFunctionVolatile),doesContainFunctions(t,this.functionRegistry.isFunctionDependentOnSheetStructureChange));return this.cache.set(e,o),o}},{key:"get",value:function(e){return this.cache.get(e)||null}},{key:"maybeSetAndThenGet",value:function(e,t){var s=this.cache.get(e);return s?s.ast:(this.set(e,t),t)}},{key:"destroy",value:function(){this.cache.clear()}}]),e}();exports.Cache=Cache;var doesContainFunctions=function e(t,s){switch(t.type){case _.AstNodeType.EMPTY:case _.AstNodeType.NUMBER:case _.AstNodeType.STRING:case _.AstNodeType.ERROR:case _.AstNodeType.ERROR_WITH_RAW_INPUT:case _.AstNodeType.CELL_REFERENCE:case _.AstNodeType.CELL_RANGE:case _.AstNodeType.COLUMN_RANGE:case _.AstNodeType.ROW_RANGE:case _.AstNodeType.NAMED_EXPRESSION:return!1;case _.AstNodeType.PERCENT_OP:case _.AstNodeType.PLUS_UNARY_OP:case _.AstNodeType.MINUS_UNARY_OP:return e(t.value,s);case _.AstNodeType.CONCATENATE_OP:case _.AstNodeType.EQUALS_OP:case _.AstNodeType.NOT_EQUAL_OP:case _.AstNodeType.LESS_THAN_OP:case _.AstNodeType.GREATER_THAN_OP:case _.AstNodeType.LESS_THAN_OR_EQUAL_OP:case _.AstNodeType.GREATER_THAN_OR_EQUAL_OP:case _.AstNodeType.MINUS_OP:case _.AstNodeType.PLUS_OP:case _.AstNodeType.TIMES_OP:case _.AstNodeType.DIV_OP:case _.AstNodeType.POWER_OP:return e(t.left,s)||e(t.right,s);case _.AstNodeType.PARENTHESIS:return e(t.expression,s);case _.AstNodeType.FUNCTION_CALL:return!!s(t.procedureName)||t.args.some(function(t){return e(t,s)})}};exports.doesContainFunctions=doesContainFunctions;
//# sourceMappingURL=/sm/d51a6878b6eddcdae1e5a14a6621182849d8bb483ebfc3dd56f511da77194093.map