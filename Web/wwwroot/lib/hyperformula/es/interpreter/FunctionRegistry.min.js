/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/hyperformula@0.1.3/es/interpreter/FunctionRegistry.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import"core-js/modules/es.symbol";import"core-js/modules/es.symbol.description";import"core-js/modules/es.symbol.iterator";import"core-js/modules/es.array.concat";import"core-js/modules/es.array.find";import"core-js/modules/es.array.for-each";import"core-js/modules/es.array.from";import"core-js/modules/es.array.iterator";import"core-js/modules/es.array.slice";import"core-js/modules/es.function.name";import"core-js/modules/es.map";import"core-js/modules/es.object.keys";import"core-js/modules/es.object.to-string";import"core-js/modules/es.regexp.to-string";import"core-js/modules/es.set";import"core-js/modules/es.string.iterator";import"core-js/modules/web.dom-collections.for-each";import"core-js/modules/web.dom-collections.iterator";import"regenerator-runtime/runtime";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var r=[],n=!0,o=!1,i=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{n||null==s.return||s.return()}finally{if(o)throw i}}return r}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _createForOfIteratorHelper(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var n=0,o=function(){};return{s:o,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==r.return||r.return()}finally{if(s)throw i}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}import{FunctionPluginValidationError,ProtectedFunctionError}from"../errors";import{HyperFormula}from"../HyperFormula";import{VersionPlugin}from"./plugin/VersionPlugin";export var FunctionRegistry=function(){function e(t){var r=this;if(_classCallCheck(this,e),this.config=t,this.functions=new Map,this.volatileFunctions=new Set,this.structuralChangeFunctions=new Set,this.functionsWhichDoesNotNeedArgumentsToBeComputed=new Set,this.doesFunctionNeedArgumentToBeComputed=function(e){return r.functionsWhichDoesNotNeedArgumentsToBeComputed.has(e)},this.isFunctionVolatile=function(e){return r.volatileFunctions.has(e)},this.isFunctionDependentOnSheetStructureChange=function(e){return r.structuralChangeFunctions.has(e)},t.functionPlugins.length>0){this.instancePlugins=new Map;var n,o=_createForOfIteratorHelper(t.functionPlugins);try{for(o.s();!(n=o.n()).done;){var i=n.value;e.loadPluginFunctions(i,this.instancePlugins)}}catch(e){o.e(e)}finally{o.f()}}else this.instancePlugins=new Map(e.plugins);var a,s=_createForOfIteratorHelper(e.protectedFunctions());try{for(s.s();!(a=s.n()).done;){var u=_slicedToArray(a.value,2),c=u[0],l=u[1];e.loadFunctionUnprotected(l,c,this.instancePlugins)}}catch(e){s.e(e)}finally{s.f()}var f,d=_createForOfIteratorHelper(this.instancePlugins.entries());try{for(d.s();!(f=d.n()).done;){var y=_slicedToArray(f.value,2),p=y[0],h=y[1];this.categorizeFunction(p,h.implementedFunctions[p])}}catch(e){d.e(e)}finally{d.f()}}return _createClass(e,[{key:"initializePlugins",value:function(e){var t,r=this,n=[],o=_createForOfIteratorHelper(this.instancePlugins.entries());try{var i=function(){var o=_slicedToArray(t.value,2),i=o[0],a=o[1],s=n.find(function(e){return e instanceof a});void 0===s&&(s=new a(e),n.push(s));var u=a.implementedFunctions[i].method;r.functions.set(i,[u,s])};for(o.s();!(t=o.n()).done;)i()}catch(e){o.e(e)}finally{o.f()}}},{key:"getFunctionPlugin",value:function(t){if(!e.functionIsProtected(t))return this.instancePlugins.get(t)}},{key:"getFunction",value:function(e){return this.functions.get(e)}},{key:"getPlugins",value:function(){var t,r=new Set,n=_createForOfIteratorHelper(this.instancePlugins);try{for(n.s();!(t=n.n()).done;){var o=_slicedToArray(t.value,2),i=o[0],a=o[1];e.functionIsProtected(i)||r.add(a)}}catch(e){n.e(e)}finally{n.f()}return Array.from(r)}},{key:"getRegisteredFunctionIds",value:function(){return Array.from(this.functions.keys())}},{key:"categorizeFunction",value:function(e,t){t.isVolatile&&this.volatileFunctions.add(e),t.doesNotNeedArgumentsToBeComputed&&this.functionsWhichDoesNotNeedArgumentsToBeComputed.add(e),t.isDependentOnSheetStructureChange&&this.structuralChangeFunctions.add(e)}}],[{key:"registerFunctionPlugin",value:function(e,t){this.loadPluginFunctions(e,this.plugins),void 0!==t&&this.loadTranslations(t)}},{key:"registerFunction",value:function(e,t,r){if(void 0===t.implementedFunctions[e])throw FunctionPluginValidationError.functionNotDeclaredInPlugin(e,t.name);this.loadPluginFunction(t,e,this.plugins),void 0!==r&&this.loadTranslations(r)}},{key:"unregisterFunction",value:function(e){if(this.functionIsProtected(e))throw ProtectedFunctionError.cannotUnregisterFunctionWithId(e);this.plugins.delete(e)}},{key:"unregisterFunctionPlugin",value:function(e){var t,r=_createForOfIteratorHelper(this.protectedPlugins());try{for(r.s();!(t=r.n()).done;){if(t.value===e)throw ProtectedFunctionError.cannotUnregisterProtectedPlugin()}}catch(e){r.e(e)}finally{r.f()}var n,o=_createForOfIteratorHelper(this.plugins.entries());try{for(o.s();!(n=o.n()).done;){var i=_slicedToArray(n.value,2),a=i[0];i[1]===e&&this.plugins.delete(a)}}catch(e){o.e(e)}finally{o.f()}}},{key:"unregisterAll",value:function(){this.plugins.clear()}},{key:"getRegisteredFunctionIds",value:function(){return[].concat(_toConsumableArray(Array.from(this.plugins.keys())),_toConsumableArray(Array.from(this._protectedPlugins.keys())))}},{key:"getPlugins",value:function(){return Array.from(new Set(this.plugins.values()).values())}},{key:"getFunctionPlugin",value:function(e){return this.functionIsProtected(e)?void 0:this.plugins.get(e)}},{key:"loadTranslations",value:function(e){var t=new Set(HyperFormula.getRegisteredLanguagesCodes());Object.keys(e).forEach(function(r){t.has(r)&&HyperFormula.getLanguage(r).extendFunctions(e[r])})}},{key:"loadPluginFunctions",value:function(e,t){var r=this;Object.keys(e.implementedFunctions).forEach(function(n){r.loadPluginFunction(e,n,t)})}},{key:"loadPluginFunction",value:function(e,t,r){if(this.functionIsProtected(t))throw ProtectedFunctionError.cannotRegisterFunctionWithId(t);this.loadFunctionUnprotected(e,t,r)}},{key:"loadFunctionUnprotected",value:function(e,t,r){var n=e.implementedFunctions[t].method;if(!Object.prototype.hasOwnProperty.call(e.prototype,n))throw FunctionPluginValidationError.functionMethodNotFound(n,e.name);r.set(t,e)}},{key:"functionIsProtected",value:function(e){return this._protectedPlugins.has(e)}},{key:"protectedFunctions",value:regeneratorRuntime.mark(function e(){var t,r,n,o,i;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._protectedPlugins),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=10;break}if(n=_slicedToArray(r.value,2),o=n[0],void 0===(i=n[1])){e.next=8;break}return e.next=8,[o,i];case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,12,15,18]])})},{key:"protectedPlugins",value:regeneratorRuntime.mark(function e(){var t,r,n,o;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=_createForOfIteratorHelper(this._protectedPlugins),e.prev=1,t.s();case 3:if((r=t.n()).done){e.next=10;break}if(n=_slicedToArray(r.value,2),void 0===(o=n[1])){e.next=8;break}return e.next=8,o;case 8:e.next=3;break;case 10:e.next=15;break;case 12:e.prev=12,e.t0=e.catch(1),t.e(e.t0);case 15:return e.prev=15,t.f(),e.finish(15);case 18:case"end":return e.stop()}},e,this,[[1,12,15,18]])})}]),e}();FunctionRegistry.plugins=new Map,FunctionRegistry._protectedPlugins=new Map([["VERSION",VersionPlugin],["OFFSET",void 0]]);
//# sourceMappingURL=/sm/ea2b38d465b7f9510607db6d9a4e29589af9584b0c8c5423ace82b234379c1bc.map