/**
 * Minified by jsDelivr using Terser v3.14.1.
 * Original file: /npm/hyperformula@0.1.3/es/Matrix.js
 *
 * Do NOT use SRI with dynamically generated files! More information: https://www.jsdelivr.com/using-sri-with-dynamic-files
 */
import"core-js/modules/es.symbol";import"core-js/modules/es.symbol.description";import"core-js/modules/es.symbol.iterator";import"core-js/modules/es.array.concat";import"core-js/modules/es.array.fill";import"core-js/modules/es.array.from";import"core-js/modules/es.array.iterator";import"core-js/modules/es.array.slice";import"core-js/modules/es.array.some";import"core-js/modules/es.array.splice";import"core-js/modules/es.function.name";import"core-js/modules/es.object.to-string";import"core-js/modules/es.regexp.to-string";import"core-js/modules/es.string.iterator";import"core-js/modules/web.dom-collections.iterator";import"regenerator-runtime/runtime";function _createForOfIteratorHelper(r,e){var t;if("undefined"==typeof Symbol||null==r[Symbol.iterator]){if(Array.isArray(r)||(t=_unsupportedIterableToArray(r))||e&&r&&"number"==typeof r.length){t&&(r=t);var o=0,i=function(){};return{s:i,n:function(){return o>=r.length?{done:!0}:{done:!1,value:r[o++]}},e:function(r){throw r},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,a=!0,s=!1;return{s:function(){t=r[Symbol.iterator]()},n:function(){var r=t.next();return a=r.done,r},e:function(r){s=!0,n=r},f:function(){try{a||null==t.return||t.return()}finally{if(s)throw n}}}}function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,e){if(r){if("string"==typeof r)return _arrayLikeToArray(r,e);var t=Object.prototype.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,e):void 0}}function _iterableToArray(r){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r))return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _arrayLikeToArray(r,e){(null==e||e>r.length)&&(e=r.length);for(var t=0,o=new Array(e);t<e;t++)o[t]=r[t];return o}function _defineProperties(r,e){for(var t=0;t<e.length;t++){var o=e[t];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(r,o.key,o)}}function _createClass(r,e,t){return e&&_defineProperties(r.prototype,e),t&&_defineProperties(r,t),r}function _classCallCheck(r,e){if(!(r instanceof e))throw new TypeError("Cannot call a class as a function")}import{AbsoluteCellRange}from"./AbsoluteCellRange";import{CellError,ErrorType,simpleCellAddress}from"./Cell";import{AstNodeType}from"./parser";export var MatrixSize=function r(e,t){if(_classCallCheck(this,r),this.width=e,this.height=t,e<=0||t<=0)throw Error("Incorrect matrix size")};export function matrixSizeForTranspose(r){return new MatrixSize(r.height,r.width)}export function matrixSizeForMultiplication(r,e){return new MatrixSize(e.width,r.height)}export function matrixSizeForPoolFunction(r,e,t){return new MatrixSize(1+(r.width-e)/t,1+(r.height-e)/t)}export function checkMatrixSize(r,e){if(r.type!==AstNodeType.FUNCTION_CALL){if(r.type===AstNodeType.CELL_RANGE){var t=AbsoluteCellRange.fromCellRange(r,e);return{width:t.width(),height:t.height()}}return r.type===AstNodeType.NUMBER||r.type===AstNodeType.CELL_REFERENCE?{width:1,height:1}:new CellError(ErrorType.VALUE)}switch(r.procedureName){case"MMULT":if(2!==r.args.length)return new CellError(ErrorType.NA);if(r.args.some(function(r){return r.type===AstNodeType.EMPTY}))return new CellError(ErrorType.NUM);var o=checkMatrixSize(r.args[0],e),i=checkMatrixSize(r.args[1],e);return o instanceof CellError?o:i instanceof CellError?i:o.width!==i.height?new CellError(ErrorType.VALUE):matrixSizeForMultiplication(o,i);case"MEDIANPOOL":case"MAXPOOL":if(r.args.length<2||r.args.length>3)return new CellError(ErrorType.NA);if(r.args.some(function(r){return r.type===AstNodeType.EMPTY}))return new CellError(ErrorType.NUM);var n=checkMatrixSize(r.args[0],e),a=r.args[1];if(n instanceof CellError)return n;if(a.type!==AstNodeType.NUMBER)return new CellError(ErrorType.VALUE);var s=a.value,u=a.value;if(3===r.args.length){var l=r.args[2];if(l.type!==AstNodeType.NUMBER)return new CellError(ErrorType.VALUE);u=l.value}return s>n.width||s>n.height||u>s||(n.width-s)%u!=0||(n.height-s)%u!=0?new CellError(ErrorType.VALUE):matrixSizeForPoolFunction(n,s,u);case"TRANSPOSE":if(1!==r.args.length)return new CellError(ErrorType.NA);if(r.args[0].type===AstNodeType.EMPTY)return new CellError(ErrorType.NUM);var c=checkMatrixSize(r.args[0],e);return c instanceof CellError?c:matrixSizeForTranspose(c);default:return new CellError(ErrorType.VALUE)}}export var NotComputedMatrix=function(){function r(e){_classCallCheck(this,r),this.size=e}return _createClass(r,[{key:"width",value:function(){return this.size.width}},{key:"height",value:function(){return this.size.height}},{key:"get",value:function(r,e){throw Error("Matrix not computed yet.")}}]),r}();export var Matrix=function(){function r(e){_classCallCheck(this,r),this.size=new MatrixSize(e.length>0?e[0].length:0,e.length),this.matrix=e}return _createClass(r,[{key:"addRows",value:function(r,e){var t;(t=this.matrix).splice.apply(t,[r,0].concat(_toConsumableArray(this.zeroArrays(e,this.width())))),this.size.height+=e}},{key:"addColumns",value:function(r,e){for(var t=0;t<this.height();t++){var o;(o=this.matrix[t]).splice.apply(o,[r,0].concat(_toConsumableArray(new Array(e).fill(0))))}this.size.width+=e}},{key:"removeRows",value:function(r,e){if(this.outOfBound(0,r)||this.outOfBound(0,e))throw Error("Matrix index out of bound");var t=e-r+1;this.matrix.splice(r,t),this.size.height-=t}},{key:"removeColumns",value:function(r,e){if(this.outOfBound(r,0)||this.outOfBound(e,0))throw Error("Matrix index out of bound");var t,o=e-r+1,i=_createForOfIteratorHelper(this.matrix);try{for(i.s();!(t=i.n()).done;){t.value.splice(r,o)}}catch(r){i.e(r)}finally{i.f()}this.size.width-=o}},{key:"zeroArrays",value:function(r,e){for(var t=[],o=0;o<r;++o)t.push(new Array(e).fill(0));return t}},{key:"get",value:function(r,e){if(this.outOfBound(r,e))throw Error("Matrix index out of bound");return this.matrix[e][r]}},{key:"set",value:function(r,e,t){if(this.outOfBound(r,e))throw Error("Matrix index out of bound");this.matrix[e][r]=t}},{key:"width",value:function(){return this.size.width}},{key:"height",value:function(){return this.size.height}},{key:"raw",value:function(){return this.matrix}},{key:"generateValues",value:regeneratorRuntime.mark(function r(e){var t,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:t=0;case 1:if(!(t<this.size.height)){r.next=12;break}o=0;case 3:if(!(o<this.size.width)){r.next=9;break}return r.next=6,[this.matrix[t][o],simpleCellAddress(e.sheet,e.col+o,e.row+t)];case 6:++o,r.next=3;break;case 9:++t,r.next=1;break;case 12:case"end":return r.stop()}},r,this)})},{key:"outOfBound",value:function(r,e){return r<0||e<0||e>this.size.height-1||r>this.size.width-1}}]),r}();export var ErroredMatrix=function(){function r(e,t){_classCallCheck(this,r),this.error=e,this.size=t}return _createClass(r,[{key:"get",value:function(r,e){return this.error}},{key:"width",value:function(){return this.size.width}},{key:"height",value:function(){return this.size.height}}]),r}();
//# sourceMappingURL=/sm/8ac2cd47770905b0fce7bcaf1b197eb59b26f4e3c223a4e5311a78286249d3d7.map